
1 git clone  https://github.com/ibmdb/rust-ibm_db.git 
2 cd rust-ibm_db
3 cargo build --release
4 link error 1181 , can not find db2app64.lib 

# 1 [link error 1181] Cargo build ON Windows, then you got an error like below.
```error message
	error: linking with `link.exe` failed: exit code: 1181
  |
  = note: "C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\VC\\Tools\\MSVC\\14.30.30705\\bin\\HostX64\\x64\\link.exe" "/NOLOGO" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.11fl6e5b20xzses7.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.12lics7p5k95uo0m.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.15cf22vh5vt2v3ya.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.19fo9umg2vvta0bx.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.19xe93eih6yis337.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1h51s4j28v2atqje.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1hjgg18ql2z8ctgv.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1jsyc06mal4d5b5i.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1ril5a6n42y42u2p.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1sm1tod86tpwbfip.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1st12o47rbb5wkbq.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1uqlhmr2wflkz5x2.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1whrg71ecnslaihf.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1x0nqco2ktfa44kk.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2d21ql0etwpknua7.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2j89fhl6r6y4h359.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2kl3m871mbjkjg2j.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2mqz33c4pdfo5jaq.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2r7sz2wunaql3742.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.2vkjmg8d6whfq1ou.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.33uttto5rfqh7xdh.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.35mx9x263bu123yp.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.3pq65w22fz2eyt2y.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.3u5myx2n1b8wp8x1.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.43skh9lfd95qfoge.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4eu0rd4b0h6yfwym.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4ig3kw5weo76htzb.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4kvhrzhji2tanphm.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4sgncb2b425irrro.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4vgbw4jwbvyzqj17.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4ysdde3a8la8ok8r.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.4z2opu2s94bo32p0.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.52c0ih1l0l2faiq5.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.58w2mkonvhj99aqb.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.5eh329ton3pktxg.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.5fnbtx8ylow7gwc.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.7r8f665mf2xack7.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.lxvp8kf0kv4xf56.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.t5anixl7mho07w4.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.urhvs9ia1ohbksm.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.z7w1antuwg47250.rcgu.o" "E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.1u2uqsa47p3flmfh.rcgu.o" "/LIBPATH:E:\\Repos\\rust-ibm_db\\target\\debug\\deps" "/LIBPATH:./lib" "/LIBPATH:E:\\Repos\\rust-ibm_db\\target\\debug\\build\\sys-info-e365b7fc33119d85\\out" "/LIBPATH:E:\\Repos\\rust-ibm_db\\target\\debug\\build\\bzip2-sys-6f8684f6c4d40a6d\\out\\lib" "/LIBPATH:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libibm_db-01d455406f4d77f6.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libr2d2-cd16936c1d0ec8a6.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libscheduled_thread_pool-7b3f0e6c6c62134c.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libparking_lot-8289a061911baab2.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libparking_lot_core-126cb7fe7d264c18.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libwinapi-4dc4e600f9eee628.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libsmallvec-bb6097477b853ece.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\liblock_api-3f88e41808abfcd6.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libscopeguard-57ac60f5da7071f7.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libinstant-63626c0244a271c5.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libencoding_rs-42481ea678fadfd2.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libcfg_if-fbc13cf8a65d606b.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libodbc_safe-f2fdd296c891902c.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libodbc_sys-0c4a38be82d20335.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\liblazy_static-eae418c2083836f6.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\liblog-99e45514cda44a28.rlib" "E:\\Repos\\rust-ibm_db\\target\\debug\\deps\\libcfg_if-10cebeb4cd1e8d00.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libstd-9505d954cc550ca4.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libpanic_unwind-4368ec34df66b968.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\librustc_demangle-c4e960482b87deda.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libstd_detect-3e30157661c6e929.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libhashbrown-441bbf33311d8f21.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\librustc_std_workspace_alloc-a65adc14aa7ec78a.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libunwind-754bada3b2f76f43.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libcfg_if-bbc7454d63bcee48.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\liblibc-083a8721e26e7568.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\liballoc-fc82f5be4815a343.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\librustc_std_workspace_core-14f675cf009ff7ec.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libcore-39142ba17f25ae37.rlib" "E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\libcompiler_builtins-1a5802a39db22341.rlib" "db2app64.lib" "advapi32.lib" "bcrypt.lib" "cfgmgr32.lib" "credui.lib" "crypt32.lib" "cryptnet.lib" "fwpuclnt.lib" "gdi32.lib" "kernel32.lib" "msimg32.lib" "ncrypt.lib" "ntdll.lib" "ole32.lib" "opengl32.lib" "secur32.lib" "shell32.lib" "synchronization.lib" "user32.lib" "winspool.lib" "ws2_32.lib" "odbc32.lib" "kernel32.lib" "ws2_32.lib" "bcrypt.lib" "advapi32.lib" "userenv.lib" "kernel32.lib" "msvcrt.lib" "/NXCOMPAT" "/LIBPATH:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib" "/OUT:E:\\Repos\\rust-ibm_db\\target\\debug\\examples\\bind_params.exe" "/OPT:REF,NOICF" "/DEBUG" "/NATVIS:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\etc\\intrinsic.natvis" "/NATVIS:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\etc\\liballoc.natvis" "/NATVIS:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\etc\\libcore.natvis" "/NATVIS:E:\\Users\\lenovo\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\etc\\libstd.natvis"
  = note: Non-UTF-8 output: LINK : fatal error LNK1181: \xce\xde\xb7\xa8\xb4\xf2\xbf\xaa\xca\xe4\xc8\xeb\xce\xc4\xbc\xfe\xa1\xb0db2app64.lib\xa1\xb1\r\n
```

# 2 Solution  
## 2-1  Download db2 odbc driver like 'v11.5.7_ntx64_odbc_cli' from ibm.com. Here, 11.5 is my db2 server version. 
### 2-1-1) URL(https://www.ibm.com/support/pages/node/6524304)
### 2-1-2) Download db2 odbc driver (http://www.ibm.com/support/fixcentral/quickorder?source=dbluesearch&product=ibm%2FInformation+Management%2FIBM+Data+Server+Client+Packages&release=11.5.7.0&platform=Windows+64-bit,+x86&searchtype=fix&fixids=*odbc_cli-*FP000)
	
### 2-1-3) find the db2app64.lib, cp it into your VC\\Tools\\MSVC\\version\lib\x64 DIR.
### 2-1-4) find the db2app64.dll, cp it into your VC\\Tools\\MSVC\\version\bin\Hostx64\x64 DIR.
```chinese describe
	然后把 db2app64.lib 文件放到 VC\Tools\MSVC\版本\lib\x64目录下，即可重新编译。再进入 %IBM_DB_HOME%\clidriver 里的 bin 文件夹，将 db2app64.dll拷贝到VC\Tools\MSVC\版本\Hostx64\x64目录下。
```
## 2-3  install db2 server on Windows.(OK ?)
### 2-3-1) download db2 server , install , then the env IBM_DB_HOME created auto.
http://www.ibm.com/support/fixcentral/quickorder?source=dbluesearch&product=ibm%2FInformation+Management%2FDB2&release=11.5.7.0&platform=Windows+64-bit,+x86&searchtype=fix&fixids=*universal*FP000
### 2-3-2) if not find 'db2app64.lib' in the install dir, then download db2 odbc driver like solution 1.
		cp all the odbc driver files into IBM_DB_HOME\clidriver DIR.
		
		
		
# 4 reference
## [Windows 下安装和使用 diesel 库](https://www.sunnysab.cn/2020/03/02/Using-Rust-With-Diesel-On-Windows/)
## [如何在Windows上制作一个包含.lib和.dll的Rust Crate包](https://blog.csdn.net/yushulx/article/details/83109209)
## [Rust FFI自己手动绑定C库，link.exe报错](https://rustcc.cn/article?id=fcc3daf6-acb4-41ba-a9d2-15732d359d20)